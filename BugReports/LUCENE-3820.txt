Wrong trailing index calculation in PatternReplaceCharFilter



Description:
Reimplementation of PatternReplaceCharFilter to pass randomized tests (used to throw exceptions previously). Simplified code, dropped boundary characters, full input buffered for pattern matching.
